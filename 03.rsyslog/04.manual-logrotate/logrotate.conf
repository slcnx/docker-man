# Logrotate 测试配置
# 用于测试 logrotate 的基本功能

/var/log/test-app/*.log {
    daily                    # 每天轮转
    rotate 7                 # 保留 7 个旧文件
    compress                 # 启用 gzip 压缩
    delaycompress            # 延迟压缩（最新的 .1 文件不压缩）
    missingok                # 文件不存在不报错
    notifempty               # 空文件不轮转
    create 0644 root root    # 创建新文件，权限 644
    postrotate
        # 记录轮转时间
        echo "Log rotated at $(date)" >> /var/log/test-app/rotate.log
    endscript
}
